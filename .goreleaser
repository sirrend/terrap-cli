builds:
  - binary: terrap
    goos:
      - darwin
      - linux
      - windows

    goarch:
      - amd64
      - arm64
      - arm

    env:
      - CGO_ENABLED=0

    flags:
      - -mod=vendor

    env:
        - TERRAP_VERSION=$(grep '# version' version.md | cut -d ' ' -f3)
    ldflags:
        - -X "github.com/sirrend/terrap-cli/internal/version.Version=${TERRAP_VERSION}"

release:
  prerelease: auto

universal_binaries:
  - replace: true

brews:
  - name: terrap
    homepage: "https://github.com/sirrend/terrap-cli.git"
    tap:
      owner: sirrend
      name: homebrew-sirrend
    commit_author:
      name: TerrapCI
      email: terrapci@sirrend.com

checksum:
  name_template: 'checksums.txt'